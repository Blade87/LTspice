Version 4
SHEET 1 3492 788
WIRE 752 -576 704 -576
WIRE 816 -576 752 -576
WIRE 960 -576 816 -576
WIRE 1104 -576 960 -576
WIRE 960 -560 960 -576
WIRE 816 -544 816 -576
WIRE 1184 -512 1040 -512
WIRE 704 -496 704 -576
WIRE 1104 -480 1104 -576
WIRE 1040 -464 1040 -512
WIRE 1072 -464 1040 -464
WIRE 816 -448 816 -480
WIRE 880 -448 816 -448
WIRE 1184 -448 1184 -512
WIRE 1184 -448 1136 -448
WIRE 1264 -448 1184 -448
WIRE 880 -432 880 -448
WIRE 960 -432 960 -480
WIRE 1024 -432 960 -432
WIRE 1072 -432 1024 -432
WIRE 1264 -432 1264 -448
WIRE 816 -416 816 -448
WIRE 960 -416 960 -432
WIRE 704 -320 704 -416
WIRE 752 -320 704 -320
WIRE 816 -320 816 -352
WIRE 816 -320 752 -320
WIRE 960 -320 960 -336
WIRE 960 -320 816 -320
WIRE 1104 -320 1104 -416
WIRE 1104 -320 960 -320
WIRE 2352 -224 2352 -256
WIRE 1264 -176 1264 -192
WIRE 1360 -176 1264 -176
WIRE 1536 -176 1456 -176
WIRE 1680 -176 1536 -176
WIRE 1264 -160 1264 -176
WIRE 1536 -128 1536 -176
WIRE 1680 -128 1680 -176
WIRE 2352 -112 2352 -144
WIRE 1920 -96 1888 -96
WIRE 2032 -96 2000 -96
WIRE 1264 -48 1264 -80
WIRE 1408 -48 1408 -112
WIRE 1408 -48 1264 -48
WIRE 688 -32 672 -32
WIRE 784 -32 752 -32
WIRE 848 -32 784 -32
WIRE 992 -32 928 -32
WIRE 1264 -32 1264 -48
WIRE 2352 -16 2352 -48
WIRE 672 0 672 -32
WIRE 1968 0 1968 -16
WIRE 1536 16 1536 -48
WIRE 1760 16 1536 16
WIRE 1888 16 1888 -96
WIRE 1888 16 1840 16
WIRE 1936 16 1888 16
WIRE 1440 32 1424 32
WIRE 1536 32 1536 16
WIRE 1536 32 1440 32
WIRE 2032 32 2032 -96
WIRE 2032 32 2000 32
WIRE 2128 32 2032 32
WIRE 2176 32 2128 32
WIRE 2272 32 2256 32
WIRE 2288 32 2272 32
WIRE 1680 48 1680 -48
WIRE 1760 48 1680 48
WIRE 1872 48 1840 48
WIRE 1936 48 1872 48
WIRE 784 64 784 -32
WIRE 1264 80 1264 48
WIRE 1968 80 1968 64
WIRE 864 96 864 80
WIRE 1536 96 1536 32
WIRE 1680 96 1680 48
WIRE 1872 96 1872 48
WIRE 2272 96 2272 32
WIRE 784 112 784 64
WIRE 832 112 784 112
WIRE 1440 112 1440 32
WIRE 992 128 992 -32
WIRE 992 128 896 128
WIRE 1040 128 992 128
WIRE 1088 128 1040 128
WIRE 1200 128 1168 128
WIRE 832 144 784 144
WIRE 2352 144 2352 80
WIRE 864 176 864 160
WIRE 2272 192 2272 160
WIRE 784 208 784 144
WIRE 1264 208 1264 176
WIRE 1440 208 1440 176
WIRE 1536 208 1536 176
WIRE 1680 208 1680 176
WIRE 1872 208 1872 176
WIRE 784 272 784 208
WIRE 848 272 784 272
WIRE 992 272 992 128
WIRE 992 272 928 272
WIRE 784 288 784 272
WIRE 784 400 784 368
WIRE 1712 464 1392 464
WIRE 1760 464 1712 464
WIRE 1456 576 1456 560
WIRE 1392 592 1392 464
WIRE 1424 592 1392 592
WIRE 1552 608 1488 608
WIRE 1664 608 1632 608
WIRE 1760 608 1760 464
WIRE 1760 608 1728 608
WIRE 1776 608 1760 608
WIRE 1856 608 1776 608
WIRE 1920 608 1856 608
WIRE 2080 608 2000 608
WIRE 2112 608 2080 608
WIRE 1184 624 1136 624
WIRE 1248 624 1184 624
WIRE 1344 624 1312 624
WIRE 1424 624 1344 624
WIRE 2112 640 2112 608
WIRE 1344 656 1344 624
WIRE 1456 656 1456 640
WIRE 1856 656 1856 608
WIRE 1776 672 1776 608
WIRE 1344 768 1344 736
WIRE 1776 768 1776 736
WIRE 1856 768 1856 736
WIRE 2112 768 2112 720
FLAG 880 -432 0
FLAG 752 -576 +vcc
FLAG 752 -320 -vcc
FLAG 1264 -432 0
FLAG 1024 -432 volt_div
FLAG 672 0 0
FLAG 784 400 0
FLAG 1040 128 osc_out
FLAG 784 64 osc_inm
FLAG 784 208 osc_inp
FLAG 864 80 +vcc
FLAG 864 176 -vcc
FLAG 1264 208 0
FLAG 1264 -192 +vcc
FLAG 1536 208 0
FLAG 1424 32 esr
IOPIN 1424 32 In
FLAG 1680 208 0
FLAG 1872 208 0
FLAG 1968 -16 +vcc
FLAG 1968 80 -vcc
FLAG 2272 192 0
FLAG 2352 144 0
FLAG 2352 -256 +vcc
FLAG 2128 32 sub_out
FLAG 1440 208 0
FLAG 1344 768 0
FLAG 1456 560 +vcc
FLAG 1456 656 -vcc
FLAG 1776 768 0
FLAG 1712 464 rect_out
FLAG 2112 768 0
FLAG 1856 768 0
FLAG 2080 608 esr_out
FLAG 1184 624 sub_out
SYMBOL OpAmps\\AD8691 1104 -512 R0
SYMATTR InstName U1
SYMBOL Misc\\battery 704 -512 R0
WINDOW 3 26 88 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 6V
SYMBOL cap 800 -544 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMATTR SpiceLine V=25 Irms=7.16 Rser=0.00732742 Lser=0 mfg="KEMET" pn="C1206C106K3PAC" type="X5R"
SYMBOL cap 800 -416 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMATTR SpiceLine V=25 Irms=7.16 Rser=0.00732742 Lser=0 mfg="KEMET" pn="C1206C106K3PAC" type="X5R"
SYMBOL res 944 -576 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 944 -432 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 944 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {Rosc}
SYMBOL cap 752 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL res 944 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 800 384 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 1.5k
SYMBOL res 1184 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 47k
SYMBOL OpAmps\\AD8605 864 64 R0
SYMATTR InstName U3
SYMBOL npn 1200 80 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL res 1248 -48 R0
SYMATTR InstName R8
SYMATTR Value 12k
SYMBOL res 1248 -176 R0
SYMATTR InstName R7
SYMATTR Value 47k
SYMBOL pnp 1456 -112 M270
WINDOW 0 63 63 VLeft 2
WINDOW 3 91 89 VLeft 2
SYMATTR InstName Q2
SYMATTR Value 2N3906
SYMBOL res 1520 -144 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res 1520 80 R0
SYMATTR InstName R10
SYMATTR Value 22
SYMBOL res 1664 -144 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 1664 80 R0
SYMATTR InstName R12
SYMATTR Value 22
SYMBOL OpAmps\\AD8605 1968 -32 R0
SYMATTR InstName U2
SYMBOL res 1856 32 R90
WINDOW 0 14 118 VBottom 2
WINDOW 3 -14 6 VTop 2
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL res 1856 80 R0
SYMATTR InstName R16
SYMATTR Value 47k
SYMBOL res 1856 0 R90
WINDOW 0 11 117 VBottom 2
WINDOW 3 -13 6 VTop 2
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res 2016 -112 R90
WINDOW 0 11 117 VBottom 2
WINDOW 3 -15 19 VTop 2
SYMATTR InstName R14
SYMATTR Value 47k
SYMBOL res 2160 48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R20
SYMATTR Value 15k
SYMBOL npn 2288 -16 R0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL res 2336 -240 R0
SYMATTR InstName R21
SYMATTR Value 750
SYMBOL LED 2336 -112 R0
SYMATTR InstName SHORT
SYMATTR Value NSCW100
SYMBOL polcap 1424 112 R0
WINDOW 3 24 56 Left 2
SYMATTR InstName DUT
SYMATTR Value 10µ
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=25 Irms=23m Rser=1.95 Lser=70f mfg="Würth Elektronik" pn="865230440002 WCAP-AS5H 4.3x4.3" type="Al electrolytic"
SYMBOL res 1328 640 R0
SYMATTR InstName R17
SYMATTR Value 47k
SYMBOL OpAmps\\AD8605 1456 544 R0
SYMATTR InstName U4
SYMBOL cap 1312 608 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=50 Irms=0 Rser=0 Lser=0 mfg="Murata" pn="GCM155R71H104KE02" type="X7R"
SYMBOL res 1648 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 47
SYMBOL diode 1664 624 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N914
SYMBOL res 2016 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 5k6
SYMBOL cap 2256 96 R0
SYMATTR InstName C6
SYMATTR Value 1µ
SYMATTR SpiceLine V=25 Irms=0 Rser=0 Lser=0 mfg="Murata" pn="GCM188R71E105MA64" type="X7R"
SYMBOL cap 1760 672 R0
SYMATTR InstName C7
SYMATTR Value 1µ
SYMATTR SpiceLine V=25 Irms=0 Rser=0 Lser=0 mfg="Murata" pn="GCM188R71E105MA64" type="X7R"
SYMBOL res 2096 624 R0
SYMATTR InstName R23
SYMATTR Value 910
SYMBOL res 1840 640 R0
SYMATTR InstName R24
SYMATTR Value 10k
TEXT 1392 -400 Left 2 !.tran 0 5m 2m uic
TEXT 824 -624 Left 4 ;Power Supply
TEXT 728 -168 Left 4 ;Oscillator
TEXT 680 272 Left 2 ;586mV
TEXT 632 448 Left 1 !.meas TRAN tperiod TRIG V(osc_out)=0 RISE=3 TARG V(osc_out)=0 RISE=4
TEXT 632 480 Left 2 !.meas TRAN Osc_freq_KHz PARAM 1/tperiod/1000
TEXT 672 -104 Left 2 !.step param Rosc list 10k 170k
TEXT 1008 -56 Left 2 ;1K=400KHz\n10K=100KHz\n170K=10KHz
TEXT 1808 -192 Left 4 ;Differential Amplifier
TEXT 1432 376 Left 4 ;Precision Rectifier
TEXT 1392 -536 Left 6 ;ESR Meter
TEXT 1392 -464 Left 3 ;https://www.youtube.com/watch?v=7Nk6MP2yCRQ&t=850s
